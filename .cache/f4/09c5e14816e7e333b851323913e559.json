{"id":"fRke","dependencies":[{"name":"/Users/vaslijvasilik/Documents/LEARN/try-QR/package.json","includedInParent":true,"mtime":1599653885961}],"generated":{"js":"var e=window.qrcode,t=document.createElement(\"video\"),n=document.getElementById(\"qr-canvas\"),d=n.getContext(\"2d\"),i=document.getElementById(\"qr-result\"),c=document.getElementById(\"outputData\"),o=document.getElementById(\"btn-scan-qr\"),a=!1;function r(){n.height=t.videoHeight,n.width=t.videoWidth,d.drawImage(t,0,0,n.width,n.height),a&&requestAnimationFrame(r)}function h(){try{e.decode()}catch(t){setTimeout(h,300)}}e.callback=function(e){e&&(c.innerText=e,a=!1,t.srcObject.getTracks().forEach(function(e){e.stop()}),i.hidden=!1,n.hidden=!0,o.hidden=!1)},o.onclick=function(){navigator.mediaDevices.getUserMedia({video:{facingMode:\"environment\"}}).then(function(e){a=!0,i.hidden=!0,o.hidden=!0,n.hidden=!1,t.setAttribute(\"playsinline\",!0),t.srcObject=e,t.play(),r(),h()})};"},"sourceMaps":{"js":{"mappings":[{"source":"src/qrCodeScanner.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"src/qrCodeScanner.js","name":"qrcode","original":{"line":1,"column":6},"generated":{"line":1,"column":4}},{"source":"src/qrCodeScanner.js","name":"window","original":{"line":1,"column":15},"generated":{"line":1,"column":6}},{"source":"src/qrCodeScanner.js","name":"qrcode","original":{"line":1,"column":22},"generated":{"line":1,"column":13}},{"source":"src/qrCodeScanner.js","name":"video","original":{"line":3,"column":6},"generated":{"line":1,"column":20}},{"source":"src/qrCodeScanner.js","name":"document","original":{"line":3,"column":14},"generated":{"line":1,"column":22}},{"source":"src/qrCodeScanner.js","name":"createElement","original":{"line":3,"column":23},"generated":{"line":1,"column":31}},{"source":"src/qrCodeScanner.js","original":{"line":3,"column":37},"generated":{"line":1,"column":45}},{"source":"src/qrCodeScanner.js","name":"canvasElement","original":{"line":4,"column":6},"generated":{"line":1,"column":54}},{"source":"src/qrCodeScanner.js","name":"document","original":{"line":4,"column":22},"generated":{"line":1,"column":56}},{"source":"src/qrCodeScanner.js","name":"getElementById","original":{"line":4,"column":31},"generated":{"line":1,"column":65}},{"source":"src/qrCodeScanner.js","original":{"line":4,"column":46},"generated":{"line":1,"column":80}},{"source":"src/qrCodeScanner.js","name":"canvas","original":{"line":5,"column":6},"generated":{"line":1,"column":93}},{"source":"src/qrCodeScanner.js","name":"canvasElement","original":{"line":5,"column":15},"generated":{"line":1,"column":95}},{"source":"src/qrCodeScanner.js","name":"getContext","original":{"line":5,"column":29},"generated":{"line":1,"column":97}},{"source":"src/qrCodeScanner.js","original":{"line":5,"column":40},"generated":{"line":1,"column":108}},{"source":"src/qrCodeScanner.js","name":"qrResult","original":{"line":7,"column":6},"generated":{"line":1,"column":114}},{"source":"src/qrCodeScanner.js","name":"document","original":{"line":7,"column":17},"generated":{"line":1,"column":116}},{"source":"src/qrCodeScanner.js","name":"getElementById","original":{"line":7,"column":26},"generated":{"line":1,"column":125}},{"source":"src/qrCodeScanner.js","original":{"line":7,"column":41},"generated":{"line":1,"column":140}},{"source":"src/qrCodeScanner.js","name":"outputData","original":{"line":8,"column":6},"generated":{"line":1,"column":153}},{"source":"src/qrCodeScanner.js","name":"document","original":{"line":8,"column":19},"generated":{"line":1,"column":155}},{"source":"src/qrCodeScanner.js","name":"getElementById","original":{"line":8,"column":28},"generated":{"line":1,"column":164}},{"source":"src/qrCodeScanner.js","original":{"line":8,"column":43},"generated":{"line":1,"column":179}},{"source":"src/qrCodeScanner.js","name":"btnScanQR","original":{"line":9,"column":6},"generated":{"line":1,"column":193}},{"source":"src/qrCodeScanner.js","name":"document","original":{"line":9,"column":18},"generated":{"line":1,"column":195}},{"source":"src/qrCodeScanner.js","name":"getElementById","original":{"line":9,"column":27},"generated":{"line":1,"column":204}},{"source":"src/qrCodeScanner.js","original":{"line":9,"column":42},"generated":{"line":1,"column":219}},{"source":"src/qrCodeScanner.js","name":"scanning","original":{"line":11,"column":4},"generated":{"line":1,"column":234}},{"source":"src/qrCodeScanner.js","original":{"line":11,"column":15},"generated":{"line":1,"column":237}},{"source":"src/qrCodeScanner.js","original":{"line":44,"column":0},"generated":{"line":1,"column":239}},{"source":"src/qrCodeScanner.js","name":"tick","original":{"line":44,"column":9},"generated":{"line":1,"column":248}},{"source":"src/qrCodeScanner.js","name":"canvasElement","original":{"line":45,"column":2},"generated":{"line":1,"column":252}},{"source":"src/qrCodeScanner.js","name":"height","original":{"line":45,"column":16},"generated":{"line":1,"column":254}},{"source":"src/qrCodeScanner.js","name":"video","original":{"line":45,"column":25},"generated":{"line":1,"column":261}},{"source":"src/qrCodeScanner.js","name":"videoHeight","original":{"line":45,"column":31},"generated":{"line":1,"column":263}},{"source":"src/qrCodeScanner.js","name":"canvasElement","original":{"line":46,"column":2},"generated":{"line":1,"column":275}},{"source":"src/qrCodeScanner.js","name":"width","original":{"line":46,"column":16},"generated":{"line":1,"column":277}},{"source":"src/qrCodeScanner.js","name":"video","original":{"line":46,"column":24},"generated":{"line":1,"column":283}},{"source":"src/qrCodeScanner.js","name":"videoWidth","original":{"line":46,"column":30},"generated":{"line":1,"column":285}},{"source":"src/qrCodeScanner.js","name":"canvas","original":{"line":47,"column":2},"generated":{"line":1,"column":296}},{"source":"src/qrCodeScanner.js","name":"drawImage","original":{"line":47,"column":9},"generated":{"line":1,"column":298}},{"source":"src/qrCodeScanner.js","name":"video","original":{"line":47,"column":19},"generated":{"line":1,"column":308}},{"source":"src/qrCodeScanner.js","original":{"line":47,"column":26},"generated":{"line":1,"column":310}},{"source":"src/qrCodeScanner.js","original":{"line":47,"column":29},"generated":{"line":1,"column":312}},{"source":"src/qrCodeScanner.js","name":"canvasElement","original":{"line":47,"column":32},"generated":{"line":1,"column":314}},{"source":"src/qrCodeScanner.js","name":"width","original":{"line":47,"column":46},"generated":{"line":1,"column":316}},{"source":"src/qrCodeScanner.js","name":"canvasElement","original":{"line":47,"column":53},"generated":{"line":1,"column":322}},{"source":"src/qrCodeScanner.js","name":"height","original":{"line":47,"column":67},"generated":{"line":1,"column":324}},{"source":"src/qrCodeScanner.js","name":"scanning","original":{"line":49,"column":2},"generated":{"line":1,"column":332}},{"source":"src/qrCodeScanner.js","name":"requestAnimationFrame","original":{"line":49,"column":14},"generated":{"line":1,"column":335}},{"source":"src/qrCodeScanner.js","name":"tick","original":{"line":49,"column":36},"generated":{"line":1,"column":357}},{"source":"src/qrCodeScanner.js","original":{"line":52,"column":0},"generated":{"line":1,"column":360}},{"source":"src/qrCodeScanner.js","name":"scan","original":{"line":52,"column":9},"generated":{"line":1,"column":369}},{"source":"src/qrCodeScanner.js","original":{"line":53,"column":6},"generated":{"line":1,"column":373}},{"source":"src/qrCodeScanner.js","name":"qrcode","original":{"line":54,"column":4},"generated":{"line":1,"column":377}},{"source":"src/qrCodeScanner.js","name":"decode","original":{"line":54,"column":11},"generated":{"line":1,"column":379}},{"source":"src/qrCodeScanner.js","original":{"line":55,"column":4},"generated":{"line":1,"column":388}},{"source":"src/qrCodeScanner.js","name":"e","original":{"line":55,"column":11},"generated":{"line":1,"column":394}},{"source":"src/qrCodeScanner.js","name":"setTimeout","original":{"line":56,"column":4},"generated":{"line":1,"column":397}},{"source":"src/qrCodeScanner.js","name":"scan","original":{"line":56,"column":15},"generated":{"line":1,"column":408}},{"source":"src/qrCodeScanner.js","original":{"line":56,"column":21},"generated":{"line":1,"column":410}},{"source":"src/qrCodeScanner.js","name":"qrcode","original":{"line":13,"column":0},"generated":{"line":1,"column":416}},{"source":"src/qrCodeScanner.js","name":"callback","original":{"line":13,"column":7},"generated":{"line":1,"column":418}},{"source":"src/qrCodeScanner.js","original":{"line":13,"column":18},"generated":{"line":1,"column":427}},{"source":"src/qrCodeScanner.js","name":"res","original":{"line":13,"column":18},"generated":{"line":1,"column":436}},{"source":"src/qrCodeScanner.js","name":"res","original":{"line":14,"column":6},"generated":{"line":1,"column":439}},{"source":"src/qrCodeScanner.js","name":"outputData","original":{"line":15,"column":4},"generated":{"line":1,"column":443}},{"source":"src/qrCodeScanner.js","name":"innerText","original":{"line":15,"column":15},"generated":{"line":1,"column":445}},{"source":"src/qrCodeScanner.js","name":"res","original":{"line":15,"column":27},"generated":{"line":1,"column":455}},{"source":"src/qrCodeScanner.js","name":"scanning","original":{"line":16,"column":4},"generated":{"line":1,"column":457}},{"source":"src/qrCodeScanner.js","original":{"line":16,"column":15},"generated":{"line":1,"column":460}},{"source":"src/qrCodeScanner.js","name":"video","original":{"line":18,"column":4},"generated":{"line":1,"column":462}},{"source":"src/qrCodeScanner.js","name":"srcObject","original":{"line":18,"column":10},"generated":{"line":1,"column":464}},{"source":"src/qrCodeScanner.js","name":"getTracks","original":{"line":18,"column":20},"generated":{"line":1,"column":474}},{"source":"src/qrCodeScanner.js","name":"forEach","original":{"line":18,"column":32},"generated":{"line":1,"column":486}},{"source":"src/qrCodeScanner.js","original":{"line":18,"column":40},"generated":{"line":1,"column":494}},{"source":"src/qrCodeScanner.js","name":"track","original":{"line":18,"column":40},"generated":{"line":1,"column":503}},{"source":"src/qrCodeScanner.js","name":"track","original":{"line":19,"column":6},"generated":{"line":1,"column":506}},{"source":"src/qrCodeScanner.js","name":"stop","original":{"line":19,"column":12},"generated":{"line":1,"column":508}},{"source":"src/qrCodeScanner.js","name":"qrResult","original":{"line":22,"column":4},"generated":{"line":1,"column":517}},{"source":"src/qrCodeScanner.js","name":"hidden","original":{"line":22,"column":13},"generated":{"line":1,"column":519}},{"source":"src/qrCodeScanner.js","original":{"line":22,"column":22},"generated":{"line":1,"column":527}},{"source":"src/qrCodeScanner.js","name":"canvasElement","original":{"line":23,"column":4},"generated":{"line":1,"column":529}},{"source":"src/qrCodeScanner.js","name":"hidden","original":{"line":23,"column":18},"generated":{"line":1,"column":531}},{"source":"src/qrCodeScanner.js","original":{"line":23,"column":27},"generated":{"line":1,"column":539}},{"source":"src/qrCodeScanner.js","name":"btnScanQR","original":{"line":24,"column":4},"generated":{"line":1,"column":541}},{"source":"src/qrCodeScanner.js","name":"hidden","original":{"line":24,"column":14},"generated":{"line":1,"column":543}},{"source":"src/qrCodeScanner.js","original":{"line":24,"column":23},"generated":{"line":1,"column":551}},{"source":"src/qrCodeScanner.js","name":"btnScanQR","original":{"line":28,"column":0},"generated":{"line":1,"column":555}},{"source":"src/qrCodeScanner.js","name":"onclick","original":{"line":28,"column":10},"generated":{"line":1,"column":557}},{"source":"src/qrCodeScanner.js","original":{"line":28,"column":20},"generated":{"line":1,"column":565}},{"source":"src/qrCodeScanner.js","name":"navigator","original":{"line":29,"column":2},"generated":{"line":1,"column":576}},{"source":"src/qrCodeScanner.js","name":"mediaDevices","original":{"line":29,"column":12},"generated":{"line":1,"column":586}},{"source":"src/qrCodeScanner.js","name":"getUserMedia","original":{"line":30,"column":5},"generated":{"line":1,"column":599}},{"source":"src/qrCodeScanner.js","original":{"line":30,"column":18},"generated":{"line":1,"column":612}},{"source":"src/qrCodeScanner.js","name":"video","original":{"line":30,"column":20},"generated":{"line":1,"column":613}},{"source":"src/qrCodeScanner.js","original":{"line":30,"column":27},"generated":{"line":1,"column":619}},{"source":"src/qrCodeScanner.js","name":"facingMode","original":{"line":30,"column":29},"generated":{"line":1,"column":620}},{"source":"src/qrCodeScanner.js","original":{"line":30,"column":41},"generated":{"line":1,"column":631}},{"source":"src/qrCodeScanner.js","name":"then","original":{"line":31,"column":5},"generated":{"line":1,"column":648}},{"source":"src/qrCodeScanner.js","original":{"line":31,"column":10},"generated":{"line":1,"column":653}},{"source":"src/qrCodeScanner.js","name":"stream","original":{"line":31,"column":19},"generated":{"line":1,"column":662}},{"source":"src/qrCodeScanner.js","name":"scanning","original":{"line":32,"column":6},"generated":{"line":1,"column":665}},{"source":"src/qrCodeScanner.js","original":{"line":32,"column":17},"generated":{"line":1,"column":668}},{"source":"src/qrCodeScanner.js","name":"qrResult","original":{"line":33,"column":6},"generated":{"line":1,"column":670}},{"source":"src/qrCodeScanner.js","name":"hidden","original":{"line":33,"column":15},"generated":{"line":1,"column":672}},{"source":"src/qrCodeScanner.js","original":{"line":33,"column":24},"generated":{"line":1,"column":680}},{"source":"src/qrCodeScanner.js","name":"btnScanQR","original":{"line":34,"column":6},"generated":{"line":1,"column":682}},{"source":"src/qrCodeScanner.js","name":"hidden","original":{"line":34,"column":16},"generated":{"line":1,"column":684}},{"source":"src/qrCodeScanner.js","original":{"line":34,"column":25},"generated":{"line":1,"column":692}},{"source":"src/qrCodeScanner.js","name":"canvasElement","original":{"line":35,"column":6},"generated":{"line":1,"column":694}},{"source":"src/qrCodeScanner.js","name":"hidden","original":{"line":35,"column":20},"generated":{"line":1,"column":696}},{"source":"src/qrCodeScanner.js","original":{"line":35,"column":29},"generated":{"line":1,"column":704}},{"source":"src/qrCodeScanner.js","name":"video","original":{"line":36,"column":6},"generated":{"line":1,"column":706}},{"source":"src/qrCodeScanner.js","name":"setAttribute","original":{"line":36,"column":12},"generated":{"line":1,"column":708}},{"source":"src/qrCodeScanner.js","original":{"line":36,"column":25},"generated":{"line":1,"column":721}},{"source":"src/qrCodeScanner.js","original":{"line":36,"column":40},"generated":{"line":1,"column":736}},{"source":"src/qrCodeScanner.js","name":"video","original":{"line":37,"column":6},"generated":{"line":1,"column":739}},{"source":"src/qrCodeScanner.js","name":"srcObject","original":{"line":37,"column":12},"generated":{"line":1,"column":741}},{"source":"src/qrCodeScanner.js","name":"stream","original":{"line":37,"column":24},"generated":{"line":1,"column":751}},{"source":"src/qrCodeScanner.js","name":"video","original":{"line":38,"column":6},"generated":{"line":1,"column":753}},{"source":"src/qrCodeScanner.js","name":"play","original":{"line":38,"column":12},"generated":{"line":1,"column":755}},{"source":"src/qrCodeScanner.js","name":"tick","original":{"line":39,"column":6},"generated":{"line":1,"column":762}},{"source":"src/qrCodeScanner.js","name":"scan","original":{"line":40,"column":6},"generated":{"line":1,"column":766}}],"sources":{"src/qrCodeScanner.js":"const qrcode = window.qrcode;\n\nconst video = document.createElement(\"video\");\nconst canvasElement = document.getElementById(\"qr-canvas\");\nconst canvas = canvasElement.getContext(\"2d\");\n\nconst qrResult = document.getElementById(\"qr-result\");\nconst outputData = document.getElementById(\"outputData\");\nconst btnScanQR = document.getElementById(\"btn-scan-qr\");\n\nlet scanning = false;\n\nqrcode.callback = res => {\n  if (res) {\n    outputData.innerText = res;\n    scanning = false;\n\n    video.srcObject.getTracks().forEach(track => {\n      track.stop();\n    });\n\n    qrResult.hidden = false;\n    canvasElement.hidden = true;\n    btnScanQR.hidden = false;\n  }\n};\n\nbtnScanQR.onclick = () => {\n  navigator.mediaDevices\n    .getUserMedia({ video: { facingMode: \"environment\" } })\n    .then(function(stream) {\n      scanning = true;\n      qrResult.hidden = true;\n      btnScanQR.hidden = true;\n      canvasElement.hidden = false;\n      video.setAttribute(\"playsinline\", true); // required to tell iOS safari we don't want fullscreen\n      video.srcObject = stream;\n      video.play();\n      tick();\n      scan();\n    });\n};\n\nfunction tick() {\n  canvasElement.height = video.videoHeight;\n  canvasElement.width = video.videoWidth;\n  canvas.drawImage(video, 0, 0, canvasElement.width, canvasElement.height);\n\n  scanning && requestAnimationFrame(tick);\n}\n\nfunction scan() {\n  try {\n    qrcode.decode();\n  } catch (e) {\n    setTimeout(scan, 300);\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"620e2d398419e679b9e9ecb461d1331c","cacheData":{"env":{}}}